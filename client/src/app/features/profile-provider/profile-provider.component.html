<!-- Perfil del Proveedor -->
<ng-container *ngIf="providerData; else loadingProfile">
  <mat-card class="provider-card">
    <mat-card-header class="header-flex">
      <div mat-card-avatar class="avatar-container">
        <img [src]="providerData.avatarUrl" alt="Avatar proveedor" />
      </div>
      <div class="header-info">
        <mat-card-title class="provider-title">
          {{ providerData.companyName }}
        </mat-card-title>
        <mat-card-subtitle class="provider-subtitle">
          ğŸŒ± {{ providerData.specialty }}
          <span class="star-rating">
            <ng-container *ngFor="let _ of [1,2,3,4,5]; let i = index">
              <mat-icon *ngIf="i < providerData.rating; else empty"> â­ </mat-icon>
              <ng-template #empty><mat-icon> âœ°  </mat-icon>   </ng-template>
            </ng-container>
          </span>
        </mat-card-subtitle>
      </div>
    </mat-card-header>

    <mat-card-content class="provider-content">
      <p class="description">{{ providerData.description }}</p>
      <p><strong>ğŸ“‡ NIT:</strong> {{ providerData.nit }}</p>
      <p><strong>ğŸ“ DirecciÃ³n:</strong> {{ providerData.address }}, {{ providerData.city }}</p>
      <p><strong>ğŸ“ TelÃ©fono:</strong> {{ providerData.phone }}</p>
      <p *ngIf="providerData.website">
        <strong>ğŸ”— Web:</strong>
        <a [href]="providerData.website" target="_blank">{{ providerData.website }}</a>
      </p>
    </mat-card-content>

    <mat-card-actions align="end" class="action-buttons">
      <button mat-stroked-button color="primary" class="small-btn" (click)="openEditProfileDialog()">
        âœï¸ Editar Perfil
      </button>
      <button mat-stroked-button color="accent" class="small-btn" (click)="openEditAvailabilityDialog()">
        â° Editar Disponibilidad
      </button>
      <button mat-stroked-button color="warn" class="small-btn" (click)="openNotificationsDialog()">
        ğŸ”” Notificaciones
      </button>
    </mat-card-actions>
  </mat-card>
</ng-container>

<ng-template #loadingProfile>
  <div class="spinner-container">
    <mat-progress-spinner diameter="40" mode="indeterminate"></mat-progress-spinner>
  </div>
</ng-template>

<!-- SecciÃ³n de Servicios -->
<section class="services-section">
  <div class="services-header">
    <h2>Mis Servicios</h2>
    <div class="header-actions">
      <button mat-flat-button color="primary" class="small-btn" (click)="openAddServiceDialog()">
        â• Nuevo Servicio
      </button>
      <button mat-flat-button color="accent" class="small-btn" (click)="openGlobalEditService()">
        âœï¸ Editar Servicio
      </button>
      <button mat-flat-button color="warn" class="small-btn" (click)="openGlobalDeleteService()">
        ğŸ—‘ï¸ Eliminar Servicio
      </button>
    </div>
  </div>

  <ng-container *ngIf="services?.length; else noServices">
    <div class="services-grid">
      <mat-card *ngFor="let svc of services" class="service-card">
        <mat-card-header>
          <mat-card-title>{{ svc.name }}</mat-card-title>
          <mat-card-subtitle>
            <div>ğŸ·ï¸ CategorÃ­a: {{ svc.category }}</div>
            <div>ğŸ’° Precio: {{ svc.price | currency:'COP':'symbol':'1.0-0' }}</div>
            <div>â±ï¸ DuraciÃ³n: {{ svc.duration }}â€¯horas</div>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>{{ svc.description || 'Sin descripciÃ³n disponible' }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-container>

  <ng-template #noServices>
    <div class="no-results">
      <div class="no-results-icon">ğŸ”</div>
      <h3>No se encontraron servicios</h3>
      <p>AÃºn no has agregado ningÃºn servicio.</p>
    </div>
  </ng-template>
</section>

<!-- Servicios Activos -->
<section class="active-services-section">
  <h2>Servicios Activos</h2>
  <ul class="active-services-list">
    <li *ngFor="let svc of activeServices" class="active-service-item">
      <span class="status-indicator" [ngClass]="svc.status"></span>
      <div class="service-info">
        <div class="service-row">
          <strong>{{ svc.name }}</strong>
          <span class="service-duration">âŒ› {{ svc.duration }}â€¯h</span>
        </div>
        <div class="service-row">
          <small>ğŸ·ï¸ {{ svc.category }}</small>
          <small>ğŸ¢ {{ svc.company }}</small>
        </div>
      </div>
    </li>
  </ul>
</section>
